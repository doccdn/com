var freshHandle=function($timeout){return{restrict:"E",templateUrl:"template/ng-tf-handle-1.01.html",scope:{send:"@",close:"@"},link:function($scope,$elem,$attrs,ngModel){$scope.sendHandle=$scope.$parent[$scope.sendHandle||"sendHandle"]=function(handleData){$scope.msgIcon=["tf-load","tf-icon-success","tf-icon-fail","tf-icon-tips"];$scope.handleData=handleData||{}};$scope.closeHandle=$scope.$parent[$scope.closeHandle||"closeHandle"]=function(){if($scope.handleData.closeFn){$scope.handleData.closeFn()}$scope.handleData=false}}}};var freshMessage=function($timeout){return{restrict:"E",templateUrl:"template/ng-tf-message-1.01.html",scope:{send:"@",close:"@"},link:function($scope,$elem,$attrs,ngModel){$scope.closeMessage=$scope.$parent[$scope.closeMessage||"closeMessage"]=function(fn,data){$scope.message=false;$timeout.cancel($scope.closeTime);if(fn){fn(data)}};$scope.sendMessage=$scope.$parent[$scope.sendMessage||"sendMessage"]=function(con,title,style,option){if($scope.message){$scope.closeMessage($scope.cancelBtn?$scope.cancelBtn.callback:null,$scope.cancelBtn?$scope.cancelBtn.data:null);$scope.msgLoad=true;$timeout(function(){$scope.msgLoad=false;$scope.sendMessage(con,title,style,option)},300);return}var styleBasic={top:true,topColour:"gray",topClose:true,conColour:"black",conCircle:false,conClose:true,conText:"center",lastRight:false,bottom:true,bottomColour:"black",bodyCover:true,cover:true,size:"small",iconType:"icon",icon:false,iconSize:"img",time:3800,ad:null};var confirmBtn={text:"確認",callback:null,data:null,style:"blue2"};var cancelBtn={text:false,callback:null,data:null,style:"gray1"};var middleBtn={text:false,callback:null,data:null,style:"blue2"};$scope.message={con:(Array.isArray(con)?con:[con]),title:title||"系統提示"};$scope.msgIcon=["success","fail","tips","wait"];style=style?style:"tips";option=option||{};option.iconType=option.iconType&&option.iconType=="load"?"load":"icon";var msgStyle={result:{top:false,topClose:false,conCircle:true,conClose:false,bottom:false,size:"mini",icon:0,iconSize:"img"},tips:{top:false,topClose:false,conClose:false},tipsClose:{top:false,topClose:false,conColour:"blue",bottomColour:"white",cover:false},msg:{topClose:false,conColour:"blue",conClose:false,bottomColour:"blue",cover:false},msgClose:{conColour:"white",conClose:false,bottomColour:"white",cover:false},common:{conColour:"white",conClose:false,bottomColour:"white",cover:false,iconSize:"img",time:0},ad:{top:false,conClose:true,conColour:"white",bottomColour:"white",cover:false,size:"ad",time:0}};confirmBtn.text=style=="common"?"知道了":confirmBtn.text;$scope.msgStyle=Object.assign(styleBasic,msgStyle[style],option);$scope.confirmBtn=Object.assign(confirmBtn,option.confirmBtn||{});$scope.middleBtn=Object.assign(middleBtn,option.middleBtn||{});$scope.cancelBtn=option.cancelBtn&&typeof(option.cancelBtn)=="object"?Object.assign(cancelBtn,option.cancelBtn):(option.cancelBtn===true?{text:"取消",callback:$scope.closeMessage,data:null,style:"gray1"}:cancelBtn);$scope.btnSize=$scope.confirmBtn.text&&$scope.middleBtn.text&&$scope.cancelBtn.text?"tf-fit-normal":"";if($scope.msgStyle.time>0){$scope.closeTime=$timeout(function(){$scope.message=false;$timeout.cancel($scope.closeTime)},$scope.msgStyle.time)}}}}};var freshForm=function(){return{restrict:"E",scope:{formConfig:"=",formSet:"=",formObj:"="},templateUrl:"template/ng-tf-from-1.01.html",link:function($scope,$elem,$attrs,ngModel){}}};var freshEasyForm=function(fnService){return{restrict:"E",scope:{send:"@",boxSize:"@"},templateUrl:"template/ng-tf-easy-form-1.01.html",link:function($scope,$elem,$attrs,ngModel){var fn=$scope.fn=fnService;$scope.closeFrom=$scope.$parent[$scope.closeFrom||"closeFrom"]=function(fnuc,form,obj){delete $scope.easyForm;if(typeof(fnuc)=="function"){fnuc(form,obj)}};$scope.sendFrom=$scope.$parent[$scope.sendFrom||"sendFrom"]=function(opt,easyData,formItem,confirmBtn,cancelBtn){var option={title:"填写资料",size:"large"};var confirmButtton={text:"提交",fn:null};var cancelButtton={text:"取消",fn:null};$scope.easyData=easyData;$scope.easyForm={};$scope.easyForm.formItem=formItem;$scope.easyForm.option=Object.assign(option,opt||{});$scope.easyForm.confirmBtn=confirmBtn===false?false:Object.assign(confirmButtton,confirmBtn||{});$scope.easyForm.cancelBtn=cancelBtn===false?false:Object.assign(cancelButtton,cancelBtn||{})}}}};angular.module("themeFresh",["ngFunc"]).directive("freshMessage",freshMessage).directive("freshHandle",freshHandle).directive("freshForm",freshForm).directive("freshEasyForm",freshEasyForm);